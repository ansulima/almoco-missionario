<div id="successModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
  <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4 shadow-2xl transform animate-fade-in">
    <!-- Ícone de sucesso -->
    <div class="flex justify-center mb-4">
      <div class="bg-green-100 rounded-full p-3">
        <svg class="w-16 h-16 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
        </svg>
      </div>
    </div>

    <!-- Mensagem de agradecimento -->
    <h3 class="text-3xl font-bold text-center mb-4 text-gray-800">
      Agendamento Confirmado!
    </h3>

    <p class="text-center text-lg text-gray-600 mb-6">
      Obrigado por seu esforço em alimentar os servos do senhor, <strong><%= appointment.nome %></strong>!
    </p>

    <div class="bg-blue-50 border-l-4 border-blue-500 p-4 mb-6">
      <p class="text-gray-700 mb-2">
        <span class="font-semibold">📅 Data:</span>
        <%= I18n.l(appointment.data, format: :long) rescue appointment.data.strftime("%d/%m/%Y") %>
      </p>
      <p class="text-gray-700">
        <span class="font-semibold">📱 Telefone:</span>
        <%= appointment.telefone %>
      </p>
    </div>

    <p class="text-center text-gray-600 mb-6 italic">
      Que Deus te abençoe ricamente! Que Ele nunca permita que falte alimento em seus lares.
    </p>

    <!-- Botão para fechar -->
    <div class="flex justify-center">
      <button
        onclick="closeSuccessModal()"
        class="bg-blue-500 text-white px-8 py-3 rounded-lg hover:bg-blue-600 transition-colors font-semibold text-lg">
        Fechar
      </button>
    </div>
  </div>
</div>

<script>
  function closeSuccessModal() {
    const modal = document.getElementById('successModal');
    if (modal) {
      modal.classList.add('animate-fade-out');
      setTimeout(() => {
        modal.remove();
        window.location.href = '<%= appointments_path %>';
      }, 300);
    }
  }

  // Auto-exibir o modal quando carregado
  document.addEventListener('DOMContentLoaded', function() {
    const modal = document.getElementById('successModal');
    if (modal) {
      // Fechar ao clicar fora do modal
      modal.addEventListener('click', function(e) {
        if (e.target === modal) {
          closeSuccessModal();
        }
      });
    }
  });
</script>

<style>
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: scale(0.9);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes fadeOut {
    from {
      opacity: 1;
      transform: scale(1);
    }
    to {
      opacity: 0;
      transform: scale(0.9);
    }
  }

  .animate-fade-in {
    animation: fadeIn 0.3s ease-out;
  }

  .animate-fade-out {
    animation: fadeOut 0.3s ease-out;
  }
</style>
